angular.module("NUSAP",["ui.bootstrap","ui.router","ngCookies","ngAnimate","ngCookies"]);
"use strict";angular.module("NUSAP").config(["$stateProvider","$urlRouterProvider",function(t,a){a.otherwise("/"),t.state("index",{url:"/",templateUrl:"templates/dashboard.html",js:["js/Chart.HorizontalBar.js","http://www.chartjs.org/assets/Chart.min.js"]}).state("login",{url:"/login",templateUrl:"templates/login.html"}).state("capCal",{url:"/capCal",templateUrl:"templates/capCal.html"})}]);

function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,n,o){e[n]=o});return e}function AlertsCtrl(e,t){e.alerts=[{}],e.addAlert=function(){e.alerts.push({msg:"Another alert!"})},e.welcomeUser=function(){var n={method:"GET",url:"index.php?id=profile&token="+token};t(n).then(function(t){e.token=token,e.username=t.data.Results[0].Name,e.msg="WELCOME BACK, "+e.username+"!"},function(e){}),e.type="success"},e.closeMsg=function(){e.alert!=e.alert},e.closeAlert=function(t){e.alerts.splice(e.alerts.indexOf(this),1)}}var token;null==sessionStorage.getItem("token")?(token=getUrlVars().token,sessionStorage.setItem("isValidToken",!1)):(token=sessionStorage.getItem("token"),sessionStorage.setItem("isValidToken",!0)),angular.module("NUSAP").controller("AlertsCtrl",["$scope","$http",AlertsCtrl]);
function BarCtrl(a,r,o,t){a.getBarChart=function(){var a=document.getElementById("canvas").getContext("2d");new Chart(a).HorizontalBar(barChartData,{responsive:!0,barShowStroke:!1})}}var randomScalingFactor=function(){return Math.round(100*Math.random())},barChartData={labels:["Core","ULR","UE"],datasets:[{fillColor:"#98FB98",strokeColor:"#00FF7F",highlightFill:"#00FF7F",highlightStroke:"#00FF7F",data:[randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]},{fillColor:"#FA8072",strokeColor:"#FA8072",highlightFill:"#E58270",highlightStroke:"#FA8072",data:[randomScalingFactor(),randomScalingFactor(),randomScalingFactor()]}]};angular.module("NUSAP").controller("BarCtrl",["$scope","$cookieStore","$http","$location",BarCtrl]);
function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(o,t,d){e[t]=d});return e}function CapCalCtrl(e,o,t,d){e.testMcs=function(){var o={method:"GET",url:"index.php?id=checkMod&modCode=CP3200"};t(o).then(function(o){e.testResults=o.data.ModuleCredit},function(e){console.log("error")})},e.modsTaken=function(){var o={method:"GET",url:"index.php?id=modsTaken&token="+token+"&studentID="+sessionStorage.netid};t(o).then(function(o){e.modsCount=o.data.Results.length,e.takenMods=[],e.specialMods=[];for(var d=0,l=0;l<e.modsCount;l++)if(1==o.data.Results[l].Semester){var n=o.data.Results[l].ModuleCode;console.log("currentmod: "+n);var s=o.data.Results[l].ModuleTitle;console.log("curr title: "+s);var a=o.data.Results[l].Semester;e.specialMods.push({ModuleCode:n,ModuleTitle:s,ModuleCredit:4}),console.log(n);var r={method:"GET",url:"index.php?id=checkMod&modCode="+n+"&sem="+a};t(r).then(function(o){console.log("current count : "+d),""==o.data?e.takenMods.push({ModuleCode:e.specialMods[d].ModuleCode,ModuleTitle:e.specialMods[d].ModuleTitle,ModuleCredit:e.specialMods[d].ModuleCredit}):e.takenMods.push({ModuleCode:o.data.ModuleCode,ModuleTitle:o.data.ModuleTitle,ModuleCredit:o.data.ModuleCredit}),d+=1,console.log(e.takenMods[d])},function(e){console.log("error")})}},function(e){console.log("error")})}}var token;null==sessionStorage.getItem("token")?(token=getUrlVars().token,sessionStorage.setItem("isValidToken",!1)):(token=sessionStorage.getItem("token"),sessionStorage.setItem("isValidToken",!0));var userName,studentId;angular.module("NUSAP").controller("CapCalCtrl",["$scope","$cookieStore","$http","$location",CapCalCtrl]);
function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,o,n){e[o]=n});return e}function MasterCtrl(e,t,o,n){var s=992;e.username="",e.showProfile=function(){e.userProfile=!e.userProfile},e.getProfile=function(){var t={method:"GET",url:"index.php?id=profile&token="+token};o(t).then(function(t){e.username=t.data.Results[0].Name,sessionStorage.setItem("userName",e.username),sessionStorage.setItem("netid",t.data.Results[0].UserID),sessionStorage.setItem("matricYear",t.data.Results[0].MatriculationYear),console.log(t.data.Results[0])},function(t){e.username="Invalid User"})},e.logout=function(){sessionStorage.clear(),e.$applyAsync(function(){e.showMenu=!1}),window.location="http://localhost:8888/dist"},e.checkToken=function(){var t={method:"GET",url:"index.php?id=checkToken&token="+token};o(t).then(function(t){if(console.log("test : "+t.data),console.log(t.data.Success),$result=t.data.Success,0==$result)n.path("/login");else{var o=$result;e.$applyAsync(function(){e.showMenu=!0}),sessionStorage.setItem("isValidToken",o),sessionStorage.setItem("token",token)}},function(e){console.log("Error")})},e.getWidth=function(){return window.innerWidth},e.$watch(e.getWidth,function(o,n){o>=s?angular.isDefined(t.get("toggle"))?e.toggle=!!t.get("toggle"):e.toggle=!0:e.toggle=!1}),e.toggleSidebar=function(){e.toggle=!e.toggle,t.put("toggle",e.toggle)},window.onresize=function(){e.$apply()}}var token;null==sessionStorage.getItem("token")?(token=getUrlVars().token,sessionStorage.setItem("isValidToken",!1)):(token=sessionStorage.getItem("token"),sessionStorage.setItem("isValidToken",!0));var userName,studentId;angular.module("NUSAP").controller("MasterCtrl",["$scope","$cookieStore","$http","$location",MasterCtrl]);

function rdLoading(){var d={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return d}angular.module("NUSAP").directive("rdLoading",rdLoading);
function rdWidgetBody(){var d={requires:"^rdWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"};return d}angular.module("NUSAP").directive("rdWidgetBody",rdWidgetBody);
function rdWidgetFooter(){var e={requires:"^rdWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"};return e}angular.module("NUSAP").directive("rdWidgetFooter",rdWidgetFooter);
function rdWidgetTitle(){var i={requires:"^rdWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><div class="row"><div class="pull-left"><i class="fa" ng-class="icon"></i> {{title}} </div><div class="pull-right col-xs-6 col-sm-4" ng-transclude></div></div></div>',restrict:"E"};return i}angular.module("NUSAP").directive("rdWidgetHeader",rdWidgetTitle);
function rdWidget(){var d={transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"};return d}angular.module("NUSAP").directive("rdWidget",rdWidget);